<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCP Shopping Agent - Documentation</title>
    <style>
        :root {
            --primary: #7f54b3;
            --primary-dark: #5a3d80;
            --bg: #f7f7f7;
            --text: #333;
            --code-bg: #1e1e1e;
            --border: #ddd;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        h2 {
            color: var(--primary-dark);
            margin-top: 40px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #eee;
        }

        h3 {
            color: #555;
            margin-top: 25px;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 15px;
        }

        .badges {
            margin-bottom: 20px;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 5px;
            color: #fff;
        }

        .badge-wp {
            background: #21759b;
        }

        .badge-wc {
            background: #7f54b3;
        }

        .badge-php {
            background: #777BB4;
        }

        .badge-license {
            background: #28a745;
        }

        .intro {
            font-size: 1.1em;
            color: #666;
            background: linear-gradient(135deg, #f5f0ff 0%, #fff 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            margin-bottom: 30px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: #fafafa;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
        }

        .feature-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card ul {
            list-style: none;
            padding: 0;
        }

        .feature-card li {
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
        }

        .feature-card li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border);
        }

        th {
            background: var(--primary);
            color: #fff;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        tr:hover {
            background: #f0f0f0;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            color: #c7254e;
        }

        pre {
            background: var(--code-bg);
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .method-get {
            color: #28a745;
            font-weight: bold;
        }

        .method-post {
            color: #007bff;
            font-weight: bold;
        }

        .method-patch {
            color: #ffc107;
            font-weight: bold;
        }

        .method-delete {
            color: #dc3545;
            font-weight: bold;
        }

        .auth-yes {
            color: #dc3545;
        }

        .auth-no {
            color: #28a745;
        }

        .section-icon {
            display: inline-block;
            margin-right: 8px;
        }

        ol,
        ul {
            margin: 15px 0;
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
        }

        .file-tree {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.8;
        }

        hr {
            border: none;
            border-top: 1px solid #eee;
            margin: 40px 0;
        }

        .note {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .note-title {
            font-weight: bold;
            color: #856404;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #888;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üõí UCP Shopping Agent</h1>

        <div class="badges">
            <span class="badge badge-wp">WordPress 5.8+</span>
            <span class="badge badge-wc">WooCommerce 5.0+</span>
            <span class="badge badge-php">PHP 7.4+</span>
            <span class="badge badge-license">GPL2</span>
        </div>

        <div class="intro">
            <strong>Google Universal Commerce Protocol (UCP) implementation for WooCommerce</strong> ‚Äî Enable AI agents
            to discover, browse, and transact with your WooCommerce store through a standardized REST API.
        </div>

        <h2><span class="section-icon">üåü</span>Features</h2>

        <div class="feature-grid">
            <div class="feature-card">
                <h4>üîç Store Discovery</h4>
                <ul>
                    <li>Standard <code>/.well-known/ucp</code> endpoint</li>
                    <li>Complete store capability manifest</li>
                    <li>Merchant info, currency, locale</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üõçÔ∏è Product Catalog</h4>
                <ul>
                    <li>Browse with pagination & filtering</li>
                    <li>Search by keyword, category, price</li>
                    <li>Get by ID or SKU</li>
                    <li>Variable products support</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üìÅ Categories</h4>
                <ul>
                    <li>Full hierarchy navigation</li>
                    <li>Nested subcategory support</li>
                    <li>Products by category</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üõí Persistent Cart</h4>
                <ul>
                    <li>Create & manage carts</li>
                    <li>Add, update, remove items</li>
                    <li>Variation support</li>
                    <li>Stock validation</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üí≥ Checkout</h4>
                <ul>
                    <li>Create checkout sessions</li>
                    <li>Address management</li>
                    <li>Coupon application</li>
                    <li>Order confirmation</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üì¶ Orders</h4>
                <ul>
                    <li>Order listing & details</li>
                    <li>Event timeline tracking</li>
                    <li>Payment & shipping status</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üë§ Customers</h4>
                <ul>
                    <li>Create profiles</li>
                    <li>Update addresses</li>
                    <li>Lookup by email</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üöö Shipping</h4>
                <ul>
                    <li>Real-time rate calculation</li>
                    <li>Multiple zones</li>
                    <li>Methods listing</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>‚≠ê Reviews</h4>
                <ul>
                    <li>Product reviews listing</li>
                    <li>Review creation</li>
                    <li>Rating summary</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üéüÔ∏è Coupons</h4>
                <ul>
                    <li>Discover coupons</li>
                    <li>Validate codes</li>
                    <li>Calculate discounts</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üîî Webhooks</h4>
                <ul>
                    <li>Real-time notifications</li>
                    <li>HMAC-SHA256 signatures</li>
                    <li>Order events</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>üîê Authentication</h4>
                <ul>
                    <li>Secure API keys</li>
                    <li>Permission levels</li>
                    <li>Rate limiting</li>
                </ul>
            </div>
        </div>

        <hr>

        <h2><span class="section-icon">üìã</span>Requirements</h2>
        <ul>
            <li>WordPress 5.8 or higher</li>
            <li>WooCommerce 5.0 or higher</li>
            <li>PHP 7.4 or higher</li>
        </ul>

        <h2><span class="section-icon">üöÄ</span>Installation</h2>
        <ol>
            <li>Download the plugin zip file</li>
            <li>Go to <strong>WordPress Admin ‚Üí Plugins ‚Üí Add New ‚Üí Upload Plugin</strong></li>
            <li>Upload the zip file and click <strong>Install Now</strong></li>
            <li>Click <strong>Activate Plugin</strong></li>
            <li>Go to <strong>WooCommerce ‚Üí UCP</strong> to configure</li>
        </ol>

        <hr>

        <h2><span class="section-icon">‚öôÔ∏è</span>Configuration</h2>
        <p>Navigate to <strong>WooCommerce ‚Üí UCP</strong> in WordPress admin.</p>

        <h3>General Settings</h3>
        <table>
            <thead>
                <tr>
                    <th>Setting</th>
                    <th>Description</th>
                    <th>Default</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Enable UCP</td>
                    <td>Enable/disable UCP API endpoints</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Rate Limit</td>
                    <td>Max requests per minute per API key</td>
                    <td>100</td>
                </tr>
                <tr>
                    <td>Cart Expiry</td>
                    <td>Hours until inactive cart expires</td>
                    <td>24</td>
                </tr>
                <tr>
                    <td>Checkout Expiry</td>
                    <td>Minutes until checkout session expires</td>
                    <td>30</td>
                </tr>
                <tr>
                    <td>Enable Logging</td>
                    <td>Log API requests for debugging</td>
                    <td>No</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <h2><span class="section-icon">üîë</span>Authentication</h2>

        <h3>API Key Format</h3>
        <pre><code>key_id:secret</code></pre>
        <p>Example: <code>ucp_abc123:ucp_secret_xyz789</code></p>

        <h3>Header Authentication (Recommended)</h3>
        <pre><code>curl -H "X-UCP-API-Key: ucp_abc123:ucp_secret_xyz789" \
  https://your-store.com/wp-json/ucp/v1/products</code></pre>

        <h3>Query Parameter Authentication</h3>
        <pre><code>curl "https://your-store.com/wp-json/ucp/v1/products?ucp_api_key=ucp_abc123:ucp_secret_xyz789"</code></pre>

        <h3>Permission Levels</h3>
        <table>
            <thead>
                <tr>
                    <th>Level</th>
                    <th>Access</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>read</code></td>
                    <td>Browse products, categories, reviews</td>
                </tr>
                <tr>
                    <td><code>write</code></td>
                    <td>Create carts, checkout, orders, customers</td>
                </tr>
                <tr>
                    <td><code>admin</code></td>
                    <td>Full access including API key management</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <h2><span class="section-icon">üì°</span>API Endpoints</h2>

        <h3>Discovery</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/.well-known/ucp</code></td>
                    <td class="auth-no">No</td>
                    <td>Store discovery manifest</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/discovery</code></td>
                    <td class="auth-no">No</td>
                    <td>Same as above</td>
                </tr>
            </tbody>
        </table>

        <h3>Products</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/products</code></td>
                    <td class="auth-no">No</td>
                    <td>List products</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/products/{id}</code></td>
                    <td class="auth-no">No</td>
                    <td>Get product by ID</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/products/search</code></td>
                    <td class="auth-no">No</td>
                    <td>Search products</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/products/sku/{sku}</code></td>
                    <td class="auth-no">No</td>
                    <td>Get product by SKU</td>
                </tr>
            </tbody>
        </table>

        <h3>Categories</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/categories</code></td>
                    <td class="auth-no">No</td>
                    <td>List categories</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/categories/{id}</code></td>
                    <td class="auth-no">No</td>
                    <td>Get category</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/categories/{id}/products</code></td>
                    <td class="auth-no">No</td>
                    <td>Category products</td>
                </tr>
            </tbody>
        </table>

        <h3>Cart</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/carts</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Create cart</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Get cart</td>
                </tr>
                <tr>
                    <td class="method-delete">DELETE</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Delete cart</td>
                </tr>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}/items</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Add item</td>
                </tr>
                <tr>
                    <td class="method-patch">PATCH</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}/items/{key}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Update item</td>
                </tr>
                <tr>
                    <td class="method-delete">DELETE</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}/items/{key}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Remove item</td>
                </tr>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/carts/{id}/checkout</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Convert to checkout</td>
                </tr>
            </tbody>
        </table>

        <h3>Checkout</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/checkout/sessions</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Create session</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/checkout/sessions/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Get session</td>
                </tr>
                <tr>
                    <td class="method-patch">PATCH</td>
                    <td><code>/wp-json/ucp/v1/checkout/sessions/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Update session</td>
                </tr>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/checkout/sessions/{id}/confirm</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Confirm checkout</td>
                </tr>
            </tbody>
        </table>

        <h3>Orders</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/orders</code></td>
                    <td class="auth-yes">Write</td>
                    <td>List orders</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/orders/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Get order</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/orders/{id}/events</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Order timeline</td>
                </tr>
            </tbody>
        </table>

        <h3>Customers</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/customers</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Create customer</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/customers/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Get customer</td>
                </tr>
                <tr>
                    <td class="method-patch">PATCH</td>
                    <td><code>/wp-json/ucp/v1/customers/{id}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Update customer</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/customers/email/{email}</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Find by email</td>
                </tr>
            </tbody>
        </table>

        <h3>Shipping</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/shipping/rates</code></td>
                    <td class="auth-no">No</td>
                    <td>Calculate rates</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/shipping/methods</code></td>
                    <td class="auth-no">No</td>
                    <td>List methods</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/shipping/zones</code></td>
                    <td class="auth-no">No</td>
                    <td>List zones</td>
                </tr>
            </tbody>
        </table>

        <h3>Reviews</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/reviews</code></td>
                    <td class="auth-no">No</td>
                    <td>List reviews</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/reviews/{id}</code></td>
                    <td class="auth-no">No</td>
                    <td>Get review</td>
                </tr>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/reviews</code></td>
                    <td class="auth-yes">Write</td>
                    <td>Create review</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/reviews/product/{id}/summary</code></td>
                    <td class="auth-no">No</td>
                    <td>Rating summary</td>
                </tr>
            </tbody>
        </table>

        <h3>Coupons</h3>
        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Endpoint</th>
                    <th>Auth</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/coupons</code></td>
                    <td class="auth-no">No</td>
                    <td>List coupons</td>
                </tr>
                <tr>
                    <td class="method-post">POST</td>
                    <td><code>/wp-json/ucp/v1/coupons/validate</code></td>
                    <td class="auth-no">No</td>
                    <td>Validate coupon</td>
                </tr>
                <tr>
                    <td class="method-get">GET</td>
                    <td><code>/wp-json/ucp/v1/coupons/code/{code}</code></td>
                    <td class="auth-no">No</td>
                    <td>Get by code</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <h2><span class="section-icon">üìù</span>Usage Examples</h2>

        <h3>1. Discover Store</h3>
        <pre><code>curl https://your-store.com/.well-known/ucp</code></pre>

        <h3>2. Browse Products</h3>
        <pre><code>curl "https://your-store.com/wp-json/ucp/v1/products?per_page=10&category=15"</code></pre>

        <h3>3. Search Products</h3>
        <pre><code>curl "https://your-store.com/wp-json/ucp/v1/products/search?q=shirt&min_price=20&max_price=100"</code></pre>

        <h3>4. Create Cart & Add Items</h3>
        <pre><code># Create cart
curl -X POST \
  -H "X-UCP-API-Key: YOUR_API_KEY" \
  https://your-store.com/wp-json/ucp/v1/carts

# Add item to cart
curl -X POST \
  -H "X-UCP-API-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"product_id": 123, "quantity": 2}' \
  https://your-store.com/wp-json/ucp/v1/carts/{cart_id}/items</code></pre>

        <h3>5. Checkout Flow</h3>
        <pre><code># Convert cart to checkout
curl -X POST \
  -H "X-UCP-API-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "shipping_address": {
      "first_name": "John",
      "last_name": "Doe",
      "address_1": "123 Main St",
      "city": "Taipei",
      "country": "TW"
    }
  }' \
  https://your-store.com/wp-json/ucp/v1/carts/{cart_id}/checkout

# Confirm checkout
curl -X POST \
  -H "X-UCP-API-Key: YOUR_API_KEY" \
  https://your-store.com/wp-json/ucp/v1/checkout/sessions/{session_id}/confirm</code></pre>

        <hr>

        <h2><span class="section-icon">üîî</span>Webhooks</h2>

        <p>All webhook requests include signature headers:</p>
        <pre><code>X-UCP-Signature: sha256=&lt;hmac_signature&gt;
X-UCP-Event: order.created
X-UCP-Timestamp: 1705234567</code></pre>

        <h3>Verify Signature (PHP)</h3>
        <pre><code>&lt;?php
$payload = file_get_contents('php://input');
$signature = $_SERVER['HTTP_X_UCP_SIGNATURE'];
$secret = 'your_webhook_secret';

$expected = 'sha256=' . hash_hmac('sha256', $payload, $secret);

if (hash_equals($expected, $signature)) {
    // Valid webhook
    $data = json_decode($payload, true);
}</code></pre>

        <hr>

        <h2><span class="section-icon">üóÑÔ∏è</span>Database Tables</h2>
        <table>
            <thead>
                <tr>
                    <th>Table</th>
                    <th>Purpose</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>wp_ucp_api_keys</code></td>
                    <td>API key storage</td>
                </tr>
                <tr>
                    <td><code>wp_ucp_cart_sessions</code></td>
                    <td>Persistent cart data</td>
                </tr>
                <tr>
                    <td><code>wp_ucp_checkout_sessions</code></td>
                    <td>Checkout session data</td>
                </tr>
                <tr>
                    <td><code>wp_ucp_webhooks</code></td>
                    <td>Webhook configurations</td>
                </tr>
            </tbody>
        </table>

        <hr>

        <h2><span class="section-icon">üìÅ</span>File Structure</h2>
        <pre class="file-tree"><code>woocommerce-ucp-agent/
‚îú‚îÄ‚îÄ woocommerce-ucp-agent.php    # Main plugin file
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-admin.php      # Admin functionality
‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-settings.php   # Settings management
‚îÇ   ‚îî‚îÄ‚îÄ views/
‚îÇ       ‚îî‚îÄ‚îÄ settings-page.php    # Admin UI template
‚îú‚îÄ‚îÄ includes/
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # REST API controllers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-rest-controller.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-auth.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-discovery.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-products.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-categories.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-cart.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-checkout.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-orders.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-customers.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-shipping.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-reviews.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-ucp-coupons.php
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-api-key.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-ucp-cart-session.php
‚îÇ   ‚îú‚îÄ‚îÄ webhooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-webhook-manager.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ class-ucp-webhook-sender.php
‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-activator.php
‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-deactivator.php
‚îÇ   ‚îú‚îÄ‚îÄ class-ucp-loader.php
‚îÇ   ‚îî‚îÄ‚îÄ class-ucp-i18n.php
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ css/admin.css
‚îÇ   ‚îî‚îÄ‚îÄ js/admin.js
‚îî‚îÄ‚îÄ languages/
    ‚îî‚îÄ‚îÄ wc-ucp-agent.pot</code></pre>

        <hr>

        <h2><span class="section-icon">üõ†Ô∏è</span>Troubleshooting</h2>

        <div class="note">
            <p class="note-title">API Returns 404</p>
            <ul>
                <li>Ensure you're using the correct URL: <code>/wp-json/ucp/v1/...</code></li>
                <li>Flush permalinks: <strong>Settings ‚Üí Permalinks ‚Üí Save Changes</strong></li>
            </ul>
        </div>

        <div class="note">
            <p class="note-title">Authentication Fails</p>
            <ul>
                <li>Verify API key format: <code>key_id:secret</code></li>
                <li>Check key permissions match required endpoint access</li>
                <li>Ensure key hasn't been deleted</li>
            </ul>
        </div>

        <hr>

        <h2><span class="section-icon">üìÑ</span>License</h2>
        <p>This plugin is licensed under the <a href="https://www.gnu.org/licenses/gpl-2.0.html">GPL2 license</a>.</p>

        <footer>
            <p><strong>UCP Shopping Agent</strong> &copy; 2026 Roger Deng</p>
        </footer>
    </div>
</body>

</html>